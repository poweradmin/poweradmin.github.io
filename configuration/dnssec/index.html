<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><link rel="canonical" href="https://docs.poweradmin.org/configuration/dnssec/" />
      <link rel="shortcut icon" href="../../img/favicon.ico" />
    <title>DNSSEC - Poweradmin Documentation</title>
    <link rel="stylesheet" href="../../css/theme.css" />
    <link rel="stylesheet" href="../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../../css/extra.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "DNSSEC";
        var mkdocs_page_input_path = "configuration/dnssec.md";
        var mkdocs_page_url = "/configuration/dnssec/";
      </script>
    
    <!--[if lt IE 9]>
      <script src="../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/php.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../.." class="icon icon-home"> Poweradmin Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../..">Home</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Getting Started</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../getting-started/overview/">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../getting-started/features/">Features</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Quick Evaluation</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../getting-started/docker-demo/">Docker Demo</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../getting-started/requirements/">System Requirements</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Installation</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../installation/">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Operating Systems</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../installation/debian/">Debian</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../installation/ubuntu/">Ubuntu</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../installation/centos/">CentOS/RHEL</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Database Setup</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../database/mysql-configuration/">MySQL/MariaDB</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../database/postgresql-configuration/">PostgreSQL</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../database/sqlite/">SQLite</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../installation/manual/">Manual Installation</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../installation/composer/">Composer</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../installation/remote-setup-guide/">Remote Setup</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Configuration</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="../basic/">Basic Configuration</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../dns-settings/">DNS Settings</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../database/">Database Configuration</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../powerdns-api/">PowerDNS API</a>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="#">DNSSEC</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#overview">Overview</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#basic-concepts">Basic Concepts</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#prerequisites">Prerequisites</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#configuration-options">Configuration Options</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#implementation-methods">Implementation Methods</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#option-1-powerdns-api-method-recommended">Option 1: PowerDNS API Method (Recommended)</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#option-2-pdnsutil-method-legacy">Option 2: pdnsutil Method (Legacy)</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#powerdns-configuration">PowerDNS Configuration</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#verification">Verification</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#troubleshooting">Troubleshooting</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#migration">Migration</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#more-information">More Information</a>
    </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../logging/">Logging Setup</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../ldap/">LDAP Integration</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../mail/">Mail Configuration</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../record-types/">Record Type Customization</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >UI Customization</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../ui/overview/">Overview</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../ui/themes/">Themes</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../ui/layout/">Layout</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../ui/custom-css/">Custom CSS</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../password-policies/">Password Policies</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../security-policies/">Security Policies</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">User Guide</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" >User Management</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../user-guide/users-roles/">Users and Roles</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../user-guide/permissions/">Permissions</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >DNS Management</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../user-guide/reverse-dns/">Reverse DNS (PTR)</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" >Dynamic DNS</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" href="../../user-guide/ddns/overview/">Overview</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../user-guide/ddns/configuration/">Configuration</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../user-guide/ddns/client-setup/">Client Setup</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../user-guide/ddns/using-curl/">Using cURL</a>
                </li>
    </ul>
                </li>
    </ul>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Advanced Topics</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" >Logging</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../advanced/logging-config/">Log Configuration</a>
                </li>
    </ul>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Maintenance</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../maintenance/">Overview</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Upgrading</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../upgrading/">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../upgrading/v4.0.0/">v4.0.0</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../upgrading/v2.x.x/">v2.x.x</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../upgrading/v2.1.8/">v2.1.8</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../upgrading/v2.1.7/">v2.1.7</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../upgrading/v2.1.6/">v2.1.6</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../upgrading/v2.1.5/">v2.1.5</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../upgrading/v2.1.4/">v2.1.4</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Troubleshooting</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../troubleshooting/debugging/">Debugging</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Contributing</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../contributing/development/">Development Setup</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../contributing/coding-standards/">Coding Standards</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../contributing/testing/">Testing</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../..">Poweradmin Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../.." class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">Configuration</li>
      <li class="breadcrumb-item active">DNSSEC</li>
    <li class="wy-breadcrumbs-aside">
          <a href="https://github.com/poweradmin/poweradmin-docs/edit/main/docs/configuration/dnssec.md" class="icon icon-github"> Edit on GitHub</a>
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
  <div class="announcement">
    Note: This documentation is still in progress, not reviewed properly, and might contain some errors or outdated images. It's intended for the upcoming 4.0.0 release, so configuration settings might be different from previous versions.
  </div>
  
                <h1 id="dnssec-configuration">DNSSEC Configuration</h1>
<h2 id="overview">Overview</h2>
<p>PowerAdmin provides comprehensive support for DNSSEC (Domain Name System Security Extensions) through a well-structured implementation that follows domain-driven design principles. The system offers two implementation methods:</p>
<ol>
<li><strong>PowerDNS API Integration</strong> (Recommended): Uses the PowerDNS REST API for DNSSEC operations</li>
<li><strong>pdnsutil Command-line Tool</strong> (Legacy): Uses the pdnsutil command-line utility </li>
</ol>
<p>The DNSSEC implementation enables you to:
- Secure and unsecure zones
- Manage cryptographic keys (create, activate, deactivate, delete)
- View DS (Delegation Signer) and DNSKEY records
- Manage DNSSEC key rollovers</p>
<h2 id="basic-concepts">Basic Concepts</h2>
<ul>
<li><strong>Zone Signing Keys (ZSK)</strong>: Used to sign the actual DNS records</li>
<li><strong>Key Signing Keys (KSK)</strong>: Used to sign the ZSK and establish trust</li>
<li><strong>DS Records</strong>: Delegation Signer records that help establish the trust chain</li>
<li><strong>Key Rotation</strong>: Regular update of keys for enhanced security</li>
</ul>
<h2 id="prerequisites">Prerequisites</h2>
<ul>
<li>PowerDNS version 4.0.0 or higher</li>
<li>PowerDNS with DNSSEC support</li>
<li>Proper database configuration</li>
<li>API access configured (see <a href="../powerdns-api/">PowerDNS API Configuration</a>)</li>
</ul>
<h2 id="configuration-options">Configuration Options</h2>
<p>DNSSEC settings can be configured in the <code>config/settings.php</code> file under the <code>dnssec</code> section or through individual variables in the legacy configuration format.</p>
<table>
<thead>
<tr>
<th>Legacy variable</th>
<th>Modern equivalent</th>
<th>Default value</th>
<th>Description</th>
<th>Added in version</th>
</tr>
</thead>
<tbody>
<tr>
<td>$pdnssec_use</td>
<td>dnssec.enabled</td>
<td>false</td>
<td>Enable (true) or disable (false) DNSSEC support</td>
<td>2.1.7</td>
</tr>
<tr>
<td>$pdnssec_debug</td>
<td>dnssec.debug</td>
<td>false</td>
<td>Enable debug for DNSSEC operations</td>
<td>2.1.9</td>
</tr>
<tr>
<td>$pdnssec_command</td>
<td>dnssec.command</td>
<td>/usr/bin/pdnsutil</td>
<td>Full path to pdnsutil utility (will be deprecated in the future)</td>
<td>2.1.7</td>
</tr>
</tbody>
</table>
<h2 id="implementation-methods">Implementation Methods</h2>
<h3 id="option-1-powerdns-api-method-recommended">Option 1: PowerDNS API Method (Recommended)</h3>
<p>To enable DNSSEC using the PowerDNS API:</p>
<ol>
<li>Configure your PowerDNS server with API access</li>
<li>Update your PowerAdmin configuration file with the following settings:</li>
</ol>
<pre><code class="language-php">return [
    'dnssec' =&gt; [
        'enabled' =&gt; true,
        'debug' =&gt; false,
    ],
    'pdns_api' =&gt; [
        'url' =&gt; 'http://localhost:8081',
        'key' =&gt; 'your-api-key',
    ],
];
</code></pre>
<p>The API method provides several advantages:
- No need to configure special permissions for the web server user
- More secure as it doesn't require shell access
- Better error handling and feedback
- Full support for all DNSSEC operations</p>
<h3 id="option-2-pdnsutil-method-legacy">Option 2: pdnsutil Method (Legacy)</h3>
<p>If you can't use the API method, you can still use the legacy pdnsutil approach:</p>
<pre><code class="language-php">return [
    'dnssec' =&gt; [
        'enabled' =&gt; true,
        'debug' =&gt; false,
        'command' =&gt; '/usr/bin/pdnsutil',
    ],
    'pdns_api' =&gt; [
        'url' =&gt; '',
        'key' =&gt; '',
    ],
];
</code></pre>
<p>Configure permissions for the web server user to run pdnsutil:</p>
<p>For example, on Ubuntu with Apache:</p>
<pre><code class="language-bash"># Add the web server user to the root group
adduser www-data root

# Make pdns.conf readable by the web server user
chmod 640 /etc/powerdns/pdns.conf
</code></pre>
<p><strong>Important Note</strong>: The pdnsutil method requires the web server user to have access to the PowerDNS configuration file, which poses security risks. The API method is strongly recommended.</p>
<h2 id="powerdns-configuration">PowerDNS Configuration</h2>
<p>Make sure to enable DNSSEC in your PowerDNS configuration:</p>
<pre><code class="language-conf">dnssec=yes
api=yes
api-key=your_api_key
</code></pre>
<h2 id="verification">Verification</h2>
<p>Check DNSSEC status using:</p>
<pre><code class="language-bash">dig +dnssec example.com SOA
</code></pre>
<h2 id="troubleshooting">Troubleshooting</h2>
<p>Common issues:</p>
<ol>
<li>
<p><strong>API connection problems</strong>: Ensure the API URL is correct and the API key has the necessary permissions</p>
</li>
<li>
<p><strong>pdnsutil permission errors</strong>: Check that the web server user can access pdns.conf and has permission to execute pdnsutil</p>
</li>
<li>
<p><strong>DNSSEC operations failing</strong>: Check the PowerDNS logs for detailed error messages</p>
</li>
<li>
<p>Check that both PowerDNS API and DNSSEC are enabled</p>
</li>
<li>
<p>Verify the pdnsutil command path is correct</p>
</li>
<li>
<p>Enable debug mode temporarily to get more detailed logs</p>
</li>
</ol>
<h2 id="migration">Migration</h2>
<p>If you're currently using the pdnsutil method, it's recommended to migrate to the API method:</p>
<ol>
<li>Configure the PowerDNS API (see PowerDNS documentation)</li>
<li>Update your PowerAdmin configuration with API settings</li>
<li>No data migration is needed - the same DNSSEC keys will be accessible through both methods</li>
</ol>
<h2 id="more-information">More Information</h2>
<p>For more details on DNSSEC and PowerDNS:
- <a href="https://doc.powerdns.com/authoritative/dnssec/index.html">PowerDNS DNSSEC Documentation</a>
- <a href="https://doc.powerdns.com/authoritative/http-api/index.html">PowerDNS API Documentation</a></p>
              

            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../powerdns-api/" class="btn btn-neutral float-left" title="PowerDNS API"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../logging/" class="btn btn-neutral float-right" title="Logging Setup">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/poweradmin/poweradmin-docs" class="fa fa-github" style="color: #fcfcfc"> GitHub</a>
        </span>
    
    
      <span><a href="../powerdns-api/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../logging/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "../..";</script>
    <script src="../../js/theme_extra.js"></script>
    <script src="../../js/theme.js"></script>
      <script src="../../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
